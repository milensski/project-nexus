<div class="bg-neutral-200 min-h-screen flex flex-col">
  <div class="container max-w-sm mx-auto flex-1 flex flex-col items-center justify-center px-2">
    <div class="bg-white px-6 py-8 rounded shadow-md text-black w-full">
      <!-- LOGO -->
      <div class="text-center">
        <a routerLink="/"><img class="mx-auto w-24" src="../../../assets/img/logo.svg" alt="logo" /></a>
        <h4 class="mb-12 mt-1 pb-1 text-xl font-semibold">
          Project Nexus
        </h4>
        <h1 class="mb-8 text-3xl text-center">Register</h1>
        <form class="max-w-md mx-auto" [formGroup]="form">
          <p class="relative mb-6 font-semibold text-center">Please fill out the form</p>

          <!--Username input-->
          <div class="relative mb-8">
            <input type="text" id="username" name="username" formControlName="username"
                   class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1
                          appearance-none dark:text-white"
                   placeholder=""
                   [ngClass]="{'border-red-600 dark:border-red-500 focus:border-red-600': form.get('username')?.touched && form.get('username')?.errors}" />
            <label for="username"
                   class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">Username</label>
            <p id="outlined_error_help" class="mt-2 text-xs text-red-600 dark:text-red-400"
               *ngIf="form?.get('username')?.touched && form?.get('username')?.errors">
              <span class="font-medium">*</span>  {{ form.get('username')?.errors?.['required']?.message || 'Username is required and must be more than 5 characters' }}
            </p>
          </div>

          <!-- Email input -->
          <div class="relative mb-8">
            <input type="text" id="email" name="email" formControlName="email"
                   class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1
                          appearance-none dark:text-white"
                   [ngClass]="{'border-red-600 dark:border-red-500 focus:border-red-600': form.get('email')?.touched && form.get('email')?.errors}"
                   placeholder="" />
            <label for="email"
                   class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">Email</label>
            <p id="outlined_error_help" class="mt-2 text-xs text-red-600 dark:text-red-400"
               *ngIf="form?.get('email')?.touched && form?.get('email')?.errors">
              <span class="font-medium">*</span>
              {{ form.get('email')?.errors?.['email']?.message || 'Invalid email address' }}  </p>
          </div>
          <ng-container formGroupName="passGroup">
            <!--Password input-->
            <div class="relative mb-8">
              <input type="password" id="password" name="password" formControlName="password" class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1
                appearance-none dark:text-white"
                [ngClass]="{'border-red-600 dark:border-red-500 focus:border-red-600': passGroup?.get('password')?.touched && (passGroup?.get('password')?.errors?.['required'])}"
                placeholder=" " />
              <label for="password"
                class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">Password
                </label>
                <p id="outlined_error_help" class="mt-2 text-xs text-red-600 dark:text-red-400"
                *ngIf="passGroup?.get('password')?.touched && passGroup?.get('password')?.errors">
                <span class="font-medium">*</span>
                {{ passGroup?.get('password')?.errors?.['required']?.message || 'Password is required' }}
              </p>
            </div>
            <!--RePassword input-->
            <div class="relative mb-8">
              <input type="password" id="rePassword" name="rePassword" formControlName="rePassword" class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1
                appearance-none dark:text-white"
                [ngClass]="{'border-red-600 dark:border-red-500 focus:border-red-600': passGroup?.get('rePassword')?.touched && (passGroup?.errors?.['matchPasswordsValidator'] || passGroup?.get('rePassword')?.errors?.['required'])}"
                placeholder=" " />
              <label for="rePassword"
                class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">Repeat
                password</label>
                <p id="outlined_error_help" class="mt-2 text-xs text-red-600 dark:text-red-400"
                *ngIf="passGroup?.get('rePassword')?.touched && (passGroup?.errors?.['matchPasswordsValidator'] || passGroup?.get('rePassword')?.errors?.['required'])">
                <span class="font-medium">*</span>
                {{ passGroup?.errors?.['matchPasswordsValidator']?.message || 'Passwords do not match' }}
              </p>
            </div>


          </ng-container>


        </form>

        <app-privacy-dialog (termsAccepted)="onTermsAccepted($event)"></app-privacy-dialog>

        <div class="text-center text-sm text-red-600 mt-4 mb-3" *ngIf="!termsAccepted">Please review and accept our
          terms and
          privacy</div>
        <button [disabled]="!termsAccepted || form.invalid" mat-flat-button color="primary" type="submit"
          class="w-full text-center py-3 rounded bg-green text-white hover:bg-green-dark focus:outline-none my-1" (click)="register()">Create
          Account</button>


      </div>

      <div class="text-grey-dark mt-6 text-center">
        Already have an account?
        <a class="underline text-cyan-700 font-semibold" routerLink="/auth/login">
          Log in
        </a>.
      </div>
    </div>
  </div>